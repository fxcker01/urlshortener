{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>{% block title %}URL Shortener{% endblock %}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="{% static 'main.css' %}">
</head>
<body>

<header class="site-header">
    <nav>
        <a href="/">🏠 Home</a>

        {% if user.is_authenticated %}
            <a href="/profile/">👤 Profile</a>
            <a href="/logout/">🚪 Log out</a>
        {% else %}
            <a href="/login/">🔐 Log in</a>
            <a href="/signup/">📝 Sign up</a>
        {% endif %}
    </nav>
</header>

<hr>

<main style="margin-top: 2rem;">
    {% block content %}{% endblock %}
</main>

<div id="cookie-banner" style="display:none; position:fixed; bottom:0; left:0; right:0; background:#1a1a1a; color:#eee; padding:0.75rem 1rem; text-align:center; z-index:1000; border-top:1px solid #333; font-size:0.9rem;">
  This site uses cookies to improve your experience.
  <button id="accept-cookies" class="cookie-btn">
    Got it
  </button>
</div>


<script>
  document.addEventListener("DOMContentLoaded", function () {
  const banner = document.getElementById("cookie-banner");
  const acceptBtn = document.getElementById("accept-cookies");

  const cookieAcceptedAt = localStorage.getItem("cookiesAcceptedAt");
  const now = new Date().getTime();

  // 30 хвилин = 1800000 мс
  if (!cookieAcceptedAt || now - cookieAcceptedAt > 1800000) {
    banner.style.display = "block";
  }

  acceptBtn?.addEventListener("click", function () {
    localStorage.setItem("cookiesAccepted", "true");
    localStorage.setItem("cookiesAcceptedAt", new Date().getTime());
    banner.style.display = "none";
  });
});
</script>
</body>
</html>
